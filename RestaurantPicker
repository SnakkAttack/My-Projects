"""
Restaurant Picker v1.3
Gage Gunn
Last Edited: 1/25/2023
"""

### Libraries ###
import os
import random
import time


### Objects ###
class RestaurantPicker:
    def __init__(self):
        self.breakfast_options = ["Starbucks", "Blue Bird Cafe", "McDonald's", "Denny's", "IHop", "Waffle House"]
        self.lunch_options = ["Chic Fil-A", "Taco Bell", "McDonald's", "Sonic", "Jimmy John's", "Five Guys", "Arby's", "Machi Ramen", "Kokoro"]
        self.dinner_options = ["Dae Gee", "LuLu Asian Bistro"]
        # self.dinner_options = ["Dae Gee", "LuLu Asian Bistro", "Chili's", "QDoba", "Mt.Fuji", "Outback"]
        self.picked_restaurants = set()
        self.meal_list = []

    #Handles user decision and calls upon randomize_restaurant to pick and print a restaurant
    def restaurant(self, meal_decision): 
        if meal_decision == '1': #Breakfast
            self.current_meal = 'Breakfast'
            rp.meal_list = rp.breakfast_options
            rp.randomize_restaurant(rp.meal_list)
        elif meal_decision == '2': #Lunch
            self.current_meal = 'Lunch'
            rp.meal_list = rp.lunch_options
            rp.randomize_restaurant(rp.meal_list)
        elif meal_decision == '3': #Dinner
            self.current_meal = 'Dinner'
            rp.meal_list = rp.dinner_options
            rp.randomize_restaurant(rp.meal_list)

    #Gives user option to repick a restaurant from the same list
    def choose_same_restaurant(self):
        pick_again_choice = input(f'\nWould you like to re-pick from {self.current_meal}? (y/n)\n> ').upper()
        if pick_again_choice == 'Y':
            return True #Continue selecting from current selection
        else:
            rp.clear_picked_restaurants()
            return False #Go back to selection screen

    #Randomizes restaurant choice from the list
    def randomize_restaurant(self, meal_list):
        choice = random.choice(meal_list)
        while choice in rp.picked_restaurants:
            choice = random.choice(meal_list)
        rp.picked_restaurants.add(choice) #Restaurant isnt able to be selected twice
        print(f'-- {choice} --')

    #Checks if current restaurant list has been emptied
    def check_list_empty(self):
        if len(rp.picked_restaurants) == len(rp.meal_list) & len(rp.picked_restaurants) > 0:
            print(f"Hmm ... It seems we ran out of restaurants :(")
            time.sleep(1.5)
            return False
        else:
            return True
        
    #Clears the set picked_restaurants when called
    def clear_picked_restaurants(self):
        rp.picked_restaurants.clear()


### Functions ###
def clear_console():
    if os.name == 'nt':
        os.system('cls')
    else:
        os.system('clear')


### Variables ###
rp = RestaurantPicker()
options = {
    '1': rp.breakfast_options,
    '2': rp.lunch_options,
    '3': rp.dinner_options
    }


### Main ###
while True:
    clear_console()
    time.sleep(0.25)
    print('Welcome to the Restaurant Picker v1.3\n') 
    print('1 = Breakfast   |   2 = Lunch   |   3 = Dinner   |   4 = Exit\n')
    meal_decision = input('Please choose what meal you are deciding for\n > ')
    if meal_decision == '4':
        break
    elif meal_decision not in options: #Iterates options to match with meal_decision
        continue
    rp.restaurant(meal_decision)
    time.sleep(1)
    while rp.choose_same_restaurant():
        if not rp.check_list_empty():
            break
        rp.restaurant(meal_decision)
        time.sleep(1)
